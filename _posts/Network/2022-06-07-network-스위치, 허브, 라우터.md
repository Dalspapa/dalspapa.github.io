# 🍕 네트워크 스위치

*오늘날의 네트워크는 비즈니스를 지원하고 통신을 제공하고 엔터테인먼트를 전달하는 등 많은 역할을 한다. 이러한 네트워크에 공통으로 포함되는 기본적인 요소 중 하나가 바로 네트워크 스위치다. 리소스 공유를 목적으로 기기를 연결하는 일을 맡는다.*

<br/>

## 🍺 Network Switch
---

네트워크 스위치는 OSI 모델의 데이터 링크 계층(계층 2)에서 작동한다. 물리적 포트에 연결된 기기에서 전송된 패킷을 받아 다시 내보내는데 단, 패킷이 도달해야 하는 기기로 이어지는 포트를 통해서만 보낸다. 스위치는 이더넷, 파이버 채널, 비동기 전송 모드(ATM) 및 인피니밴드(InfiniBand) 등을 기반으로 하는데, 현재는 대부분의 스위치가 이더넷을 사용한다.

<br/>

## 🍺 작동 원리
---

기기가 스위치에 연결되면 스위치는 해당 이더넷 케이블에 연결된 기기의 `네트워크 인터페이스 카드(NIC)`에 내장된 `미디어 액세스 제어(MAC)` 주소를 확인한다. **스위치는 이 MAC 주소를 사용해 패킷이 발송된 기기와 수신된 패킷을 전달할 위치를 식별한다.** 따라서 MAC 주소는 기기에 동적으로 할당되고 변경이 가능한 네트워크 계층(계층 3) IP 주소와 달리 물리적 기기를 식별하는 데 쓰인다.

한 기기가 다른 기기로 패킷을 보내면 패킷이 스위치로 들어오고 스위치는 패킷의 헤더를 읽어 어떻게 처리할지 결정한다. 목적지 주소와 대조해 목적지 기기로 이어지는 적절한 포트를 통해 패킷을 내보낸다.

이 과정에서 스위치와 스위치에 연결된 기기에서 동시에 전송되고 수신되는 네트워크 트래픽 간의 충돌 가능성이 있으므로, 대부분의 스위치는 **기기를 오가는 패킷이 스위치 연결의 전체 대역폭에 액세스할 수 있도록 하는 전이중(`full-duplex`) 기능을 제공**한다. 두 사람이 무전기가 아닌 휴대전화를 사용해 대화하는 모습을 떠올리면 쉽게 이해할 수 있다.

한편 대부분의 스위치가 계층 2에서 작동하지만 일부 스위치는 계층 3에서도 작동할 수 있다. 이러한 스위치를 `계층 3 스위치`라고 하며 **가상 LAN(VLAN) 구성과 같은 부가 기능을 제공**한다.

<br/>
<br/>

# 🍕스위치 vs 허브
---

허브 역시 리소스 공유를 목적으로 여러 기기를 하나로 연결할 수 있는데, 허브에 연결된 기기 집단을 `LAN 세그먼트`라고 한다. 허브가 스위치와 다른 점은 **연결된 기기 중 하나에서 전송된 패킷이 허브에 연결된 모든 기기로 브로드캐스팅된다**는 점이다.

반면 스위치는 **패킷의 목적지 주소로 지정된 기기로 이어지는 포트로만 패킷이 전달**된다. 또한 스위치는 일반적으로 
- `LAN 세그먼트`와 `세그먼트에 연결된 허브`를 연결한다. 
- 스위치는 동일한 `LAN 세그먼트`의 기기를 향하는 트래픽을 걸러낸다. 
- 이런 기능 덕분에 스위치는 **자체 프로세싱 리소스와 네트워크 대역폭을 더 효율적으로 활용**한다.

<br/>
<br/>

# 🍕 스위치 vs. 라우터
---

라우터는 **네트워크 트래픽 포워딩과 라우팅 기능을 제공**하며 라우터라는 이름도 여기에 유래한다. 그러나 이 작업을 수행하는 목적과 위치가 스위치와 다르다. 라우터는 `계층 3(네트워크 계층)`에서 작동하며 네트워크를 다른 네트워크로 연결하는 데 사용된다.

스위치와 라우터 간의 차이를 쉽게 이해하려면 LAN과 WAN을 생각하면 된다. **기기는 스위치를 통해 로컬로 연결**되고 **네트워크는 라우터를 통해 다른 네트워크에 연결**된다. 패킷이 인터넷에 이르기까지 일반적으로 거치는 경로(예를 들어 기기 > 허브 > 스위치 > 라우터 > 인터넷)를 생각해 보면 이해에 도움이 될 것이다.

물론 스위칭 기능이 라우터 하드웨어에 내장돼 라우터가 스위치 역할까지 하는 경우도 있다. 대표적인 것이 가정용 무선 라우터다. WAN 포트를 통해 광대역 연결을 라우팅하지만 보통 컴퓨터와 텔레비전, 프린터 또는 게임 콘솔을 위한 이더넷 케이블을 연결하는 데 사용되는 부가적인 이더넷 포트도 제공한다. 다른 노트북이나 스마트폰과 같은 네트워크의 다른 기기는 와이파이 라우터를 통해 연결되지만 여전히 LAN을 통해 스위칭 기능을 제공한다. 따라서 **라우터는 사실상 스위치이기도 하다**. 또한 라우터에 별도의 스위치를 연결해 부가적인 기기에 인터넷과 LAN 액세스를 동시에 제공할 수도 있다.
 