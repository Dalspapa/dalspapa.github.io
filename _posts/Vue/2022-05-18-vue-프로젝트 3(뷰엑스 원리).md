# ìë°”ìŠ¤í¬ë¦½íŠ¸ ë¹„ë™ê¸° ì²˜ë¦¬

<br/>
<br/>

## Callback
---

*íŠ¹ì • ê¸°ëŠ¥(í•¨ìˆ˜ ë“±)ì´ ì¢…ë£Œë˜ëŠ” ì‹œì (ì¢…ë£Œ ë˜ì ë§ˆì)ì— ì‹¤í–‰ë˜ëŠ” í•¨ìˆ˜*
- ìë°”ìŠ¤í¬ë¦¡íŠ¸ëŠ” í•¨ìˆ˜ë¥¼ ì¸ìë¡œ ë„˜ê¸¸ ìˆ˜ ìˆë‹¤.
- ì¸ìë¡œ ì „ë‹¬ë˜ëŠ” í•¨ìˆ˜ë¥¼ ì½œë°±í•¨ìˆ˜ë¼ê³  í‘œí˜„.

<br/>

```js
function fetchData() {
  // 1
  var result = [];

  // 2
  $.ajax({
    url: 'https://api.hnpwa.com/v0/news/1.json',
    success: function(data) {
      console.log('ë°ì´í„° í˜¸ì¶œ ê²°ê³¼', data);
      result = data;
    }
  });

  // 3
  console.log('í•¨ìˆ˜ ê²°ê³¼', result);
}

fetchData();
```

> ğŸ’»CONSOLE
>
>> í•¨ìˆ˜ ê²°ê³¼ > [] (`console.log('í•¨ìˆ˜ ê²°ê³¼', resul )(`)
>> 
>> ë°ì´í„° í˜¸ì¶œ ê²°ê³¼ ... ... (`console.log('ë°ì´í„° í˜¸ì¶œ ê²°ê³¼', data);`)

- *ìë°”ìŠ¤í¬ë¦½íŠ¸ì˜ **ë¹„ë™ê¸°ì²˜ë¦¬**ë¡œ ì¸í•´ `// 2` ë¶€ë¶„ì˜ ë°ì´í„° ìš”ì²­ì„ ì²˜ë¦¬í•˜ê³ ,*
- *ì‘ë‹µ ë°›ê¸° ì „ì— ë°”ë¡œ ë‹¤ìŒ ì½”ë“œì¸ `// 3` ë¶€ë¶„ì„ ì‹¤í–‰ ì‹œí‚´.*
- *ê²°ê³¼ì ìœ¼ë¡œ ì›í•˜ëŠ” ë°ì´í„°ë¥¼ ë°›ì•„ì˜¤ì§€ ëª»í•˜ëŠ” ìƒí™© ì—°ì¶œ.*
- *ì´ íŠ¹ì„±ì´ ìë°”ìŠ¤í¬ë¦½íŠ¸ì˜ ë¹„ë™ê¸°ì²˜ë¦¬ ì½œë°±í•¨ìˆ˜ì´ë‹¤.*

<br/>

```js
function fetchData() {
  // 1
  var result = [];

  // 2
  $.ajax({
    url: 'https://api.hnpwa.com/v0/news/1.json',
    success: function(data) {
      console.log('ë°ì´í„° í˜¸ì¶œ ê²°ê³¼', data);
      result = data;

    // 3
    console.log('í•¨ìˆ˜ ê²°ê³¼', result);

    getResult(function() {
        parseResult(function() {

        });
    });
    }
  });
}

fetchData();
```

- ì¸ìë¥¼ ê³„ì† í•¨ìˆ˜ë¡œ ë„˜ê¸°ëŠ” ìƒí™©ì´ ë°œìƒí•˜ë©´
- `code indenting` ë¬¸ì œ ë¿ë§Œ ì•„ë‹ˆë¼
- ì ˆì°¨ì  ì‚¬ê³ ì—ë„ ìœ„ë°°ëœë‹¤.
- **callback hell ë°œìƒ**

<br/>
<br/> 

## Promise
---

*ì½œë°± ë¹„ë™ê¸° ì²˜ë¦¬ì‹œ ë°œìƒí•˜ëŠ” ì½œë°±ì§€ì˜¥, ì ˆì°¨ì  ì‚¬ê³ ì˜ ìœ„ë°°, ì½”ë“œì¸ë´íŒ… ê°™ì€ ë¬¸ì œë“¤ì„ í•´ê²°í•˜ê³ ì í”„ë¡œë¯¸ìŠ¤ë¼ëŠ” ë¹„ë™ê¸° íŒ¨í„´ ë“±ì¥*

```js
function callAjax() {
  return new Promise(function(resolve, reject) {
    $.ajax({
      url: 'https://api.hnpwa.com/v0/news/1.json',
      success: function(data) {
        resolve(data); // ë°ì´í„° ë°›ìœ¼ë©´ í”„ë¡œë¯¸ìŠ¤ì— resolve(ì„±ê³µì²˜ë¦¬)
      }
    });
  });
}

function fetchData() {
  var result = [];

  callAjax()
    .then(function(data) { // callAjaxí•¨ìˆ˜ ì‹¤í–‰ì‹œ ì„±ê³µí•˜ë©´ ìˆ˜í–‰(.then)
      console.log('ë°ì´í„° í˜¸ì¶œ ê²°ê³¼', data);
      result = data;
      console.log('í•¨ìˆ˜ ê²°ê³¼', result);
    });
}

fetchData();
```
- promise ê°ì²´ëŠ” `resolve`(ì„±ê³µ)ì™€ `reject`(ì‹¤íŒ¨)ë¥¼ í•­ìƒ ì¸ìë¡œ ë°›ìŒ. 
- promise ê°ì²´ê°€ ë°ì´í„°ë¥¼ ë°›ìœ¼ë©´(`resolve`) `.then` êµ¬ë¬¸ì—ì„œ ì‹¤í–‰ ë¨.
- `.then` êµ¬ë¬¸ì„ ì—°ê²°í•´ **chaining**ì´ ê°€ëŠ¥í•˜ë‹¤.

<br/>
<br/>

# Vuex
---

- *VuexëŠ” **ìƒíƒœ ê´€ë¦¬ ë„êµ¬***
- ìƒíƒœë€ ì—¬ëŸ¬ ì»´í¬ë„ŒíŠ¸ê°„ì˜ ê³µìœ ë˜ëŠ” ë°ì´í„° ì†ì„±
- ì»´í¬ë„ŒíŠ¸ ë ˆë²¨ì´ ê¹Šì–´ì§€ê±°ë‚˜ ê´€ê³„ê°€ ë³µì¡í•´ì¡Œì„ ë•Œ, ë°ì´í„° ì¡°ì‘ì— ìš©ì´

<br/>

### Vuex êµ¬ì¡°
---

vuex ì ìš© ì „ êµ¬ì¡°
- view componentì— APIí•¨ìˆ˜ë¥¼ ë°”ë¡œ í˜¸ì¶œ
- **API -> NewsView.vue**

vuex ì ìš© í›„ êµ¬ì¡°
- API í•¨ìˆ˜ë¥¼ Vuexì˜ `state`(ìƒíƒœ)ì— ë‹´ì•„ì„œ view component í™”ë©´ì— í‘œì‹œ
- **API -> Vuex -> NewsView.vue**

![enter image description here](https://vuex.vuejs.org/flow.png)

<br/>

> ğŸ“Œ ì„¤ì¹˜í•˜ê¸°
> 
> í„°ë¯¸ë„ì—ì„œ `npm i vuex@3.6.2`

<br/>

## Vuex ëª¨ë“ˆí™” ë° state ì ìš©
---

- `/src` ë””ë ‰í† ë¦¬ì— `store` ë””ë ‰í† ë¦¬ ìƒì„±
- `/store` ì— `index.js` íŒŒì¼ ìƒì„±
- `index.js` ì— í•˜ë‹¨ ì½”ë“œ ì‚½ì…
- `main.js` ì— ëª¨ë“ˆí™”í•œ Vuex(`store`) import

**/store/index.js**

```js
import Vue from 'vue';
import Vuex from 'vuex';

Vue.use(Vuex);

export const store = new Vuex.Store({
    state: {
        news: []
    }
});
```

**main.js**

```js
import Vue from 'vue';
import App from './App.vue';
import { router } from './routes/index.js';
import { store } from './store/index.js'; // vuex ì¶”ê°€

Vue.config.productionTip = false

new Vue({
  render: h => h(App),
  router, 
  store, // vuex ì¶”ê°€
}).$mount('#app')
```

<br/>

## Vue Componentsì— `actions`, `mutations` ì ìš©
---

### Vuex ìƒíƒœ ê´€ë¦¬ êµ¬ì¡°

![enter image description here](https://vuex.vuejs.org/vuex.png)

**Backend API -> Actions -> (Commit) -> Mutations -> State -> Vue Components**


> NewsView.vue -> `.dispatch` -> /store/index.js -> **actions** -> 'FETCH_NEWS' 
>
> -> `context.commit` -> **mutations** -> 'SET_NEWS' -> **state** -> Vue Components


- *Backend APIë¥¼ Actionsì—ì„œ ë°”ë¡œ Stateë¡œ ë‹´ì„ ìˆ˜ ì—†ìŒ*
- *ë¹„ë™ê¸° í˜¸ì¶œì€ Actionsì—ì„œ í•¨*
- *ë°›ì•„ì˜¨ ë°ì´í„°ë¥¼ Mutationsë¥¼ í†µí•´ì„œ Stateì— ë‹´ìŒ*

<br/>

**/store/index.js**
```js
import Vue from 'vue';
import Vuex from 'vuex';
import { fetchNewsList } from '../api/index.js'; // api ë°›ì•„ì˜¤ê¸°

Vue.use(Vuex);

export const store = new Vuex.Store({
    state: {
        news: []
    },
    mutations: {
        // í–¥ìƒëœ ê°ì²´ ì •ì˜ë²• (Enhanced Object Literal)

        // SET_NEWS: function(state, news) {
        //     state.news = news;
        // }

        // ìœ„ ì½”ë“œë¥¼ ì•„ë˜ ì½”ë“œë¡œ ì •ì˜ 
        SET_NEWS(state, news) { // response.dataê°€ newsë¼ëŠ” ì´ë¦„ìœ¼ë¡œ ë„˜ì–´ì˜´
            state.news = news; // actionsì—ì„œ ë°›ì•„ì˜¨ ë°ì´í„°ë¥¼ stateë¡œ ë„˜ê¸°ê¸°
        }
    },
    actions: {
        FETCH_NEWS(context) { // mutationsì— ì ‘ê·¼í•  ìˆ˜ ìˆëŠ” context ì¸ì ì œê³µ
            fetchNewsList()
                .then(response => {
                    console.log(response.data);
                    // context.commit ê¸°ëŠ¥(api) ì´ìš©í•´ ë°ì´í„° ë„˜ê¹€
                    context.commit('SET_NEWS', response.data);
                    // this.state.news = response.data;
                    // stateì— ë°”ë¡œ ë‹´ì„ ìˆ˜ ì—†ìŒ.
                })
                .catch(error => {
                    console.log(error);
                });
        }
    },
});
```

<br/>

### View Componentsì— ì ìš©í•˜ê¸°
---

**NewsView.vue**

```html
<template>
  <div>
    <!-- stateì—ì„œ ë°›ì•„ì˜¨ ë°ì´í„° ë¿Œë¦¬ê¸° -->
    <div v-for="user in this.$store.state.news">
      {{ user.title }}
    </div>
  </div>
</template>

<script>
export default {
  created() { 
    // .dispatch í•˜ëŠ” ìˆœê°„ ì½”ë“œì˜ ì œì–´ê°€ 
    // Vuex actionsì˜ 'FETCH_NEWS'ë¡œ ë„˜ì–´ê°„ë‹¤.
    this.$store.dispatch('FETCH_NEWS'); 
  },
}
</script>

<style>
</style>
```